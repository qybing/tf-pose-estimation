FROM docker.io/ubuntu:16.04
RUN apt-get update && apt-get install -yq python3 python3-pip git swig && \
apt-get install -yq python-qt4 python-tk  libglib2.0-dev && apt-get install python-opencv -y --allow-unauthenticated
COPY . /opt/code/tf-pose-estimation
WORKDIR /opt/code/tf-pose-estimation
RUN mkdir /root/.pip/ && cd /root/.pip/ && touch pip.conf && echo '[global]' >> pip.conf && echo 'index-url = https://pypi.tuna.tsinghua.edu.cn/simple' >> pip.conf && \
echo 'trusted-host = pypi.tuna.tsinghua.edu.cn' >> pip.conf
RUN cd /opt/code/tf-pose-estimation && pip3 install --upgrade pip && pip install -U setuptools && \
pip install -r requirements.txt &&  python3 setup.py install && \
apt-get clean && rm -rf /tmp/* /var/tmp* /var/lib/apt/lists/* && \
rm -f /etc/ssh/ssh_host_* && rm -rf /usr/share/man?? /usr/share/man/??_*